<div>
    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
        <nb-card>
            <nb-card-header>
                <h5>
                    Insumo | Formulario
                </h5>
            </nb-card-header>
            <nb-card-body class="form-grid">
                <div>
                    <label class="label">*Insumo</label>
                    <input formControlName="insumo" type="text" nbInput fullWidth>
                    <div *ngIf="form.get('insumo')?.touched && form.get('insumo')?.invalid">
                        <p class="text-danger text-sm italic" *ngIf="form.get('insumo')?.errors?.['required']">Nombre de insumo requerido*</p>
                    </div>
                </div>
                <div>
                    <label class="label">*Descripción</label>
                    <input formControlName="descripcion" type="text" nbInput fullWidth>
                    <div *ngIf="form.get('descripcion')?.touched && form.get('descripcion')?.invalid">
                        <p class="text-danger text-sm italic" *ngIf="form.get('descripcion')?.errors?.['required']">Descripción de insumo requerida*</p>
                    </div>
                </div>
                <div>
                    <label class="label">*Insumo UP</label>
                    <nb-select formControlName="insumosUP" fullWidth>
                        <nb-option value="0" disabled>Insumos</nb-option>
                        <nb-option *ngFor="let insumo of insumosList" [value]="insumo.Descripcion">
                            {{ insumo.Descripcion }}
                        </nb-option>
                    </nb-select>
                </div>
                <div>
                    <label class="label">*Unidad de medida</label>
                    <nb-select formControlName="idUm" fullWidth>
                        <nb-option value="0" disabled>Unidades de medida</nb-option>
                        <nb-option *ngFor="let um of unidadesMedidaList" [value]="um.id">
                            {{ um.nombre }}
                        </nb-option>
                    </nb-select>
                    <div *ngIf="form.get('idUm')?.touched && form.get('idUm')?.invalid">
                        <p class="text-danger text-sm italic" *ngIf="form.get('idUm')?.errors?.['required']">Unidad de medida requerida*</p>
                    </div>
                    <div *ngIf="form.get('idUm')?.touched && form.get('idUm')?.invalid">
                        <p class="text-danger text-sm italic" *ngIf="form.get('idUm')?.errors?.['min']">Seleccione una unidad de medida*</p>
                    </div>
                </div>
                <div>
                    <label class="label">*Costo</label>
                    <input formControlName="costo" type="number" nbInput fullWidth min="0">
                    <div *ngIf="form.get('costo')?.touched && form.get('costo')?.invalid">
                        <p class="text-danger text-sm italic" *ngIf="form.get('costo')?.errors?.['required']">Costo requerido*</p>
                    </div>
                </div>
            </nb-card-body>
            <nb-card-footer>
                <button nbButton status="primary" type="submit">Guardar</button>
            </nb-card-footer>
        </nb-card>
    </form>
</div>

<div>
    <app-custom-table
        tableHead="Insumos | Tabla"
        keyRow="Id"
        [headers]="['#', 'Insumo', 'Descripción', 'InsumosUP','Costo', 'Unidad de Medida', 'Fecha Registro', 'Fecha Actualiza', 'Usuario Actualiza']"
        [keys]="['Id','Insumo', 'Descripcion','InsumosUP', 'Costo','UnidadMedida','FechaRegistro', 'FechaActualiza', 'UsuarioActualiza']"
        [data]="insumosList"
        [hasEdit]="true"
        [hasDelete]="true"
        [hasSearch]="true"
        (editEmit)="editInsumo($event)"
        (deleteEmit)="deleteInsumo($event)">
    ></app-custom-table>
</div>
